#This script unwraps multiple interferograms generated by Sentinel Toolbox (Stbx) using Snaphu. The files generated by Stbx, using 
#"Snaphu_Export" operator, must be organized in a folder for each interferogram and placed in a root path (main directory).     

root_path=/path/to/Project 

cd $root_path

for sub_dir in $(ls)
do
	cd $sub_dir
	awk 'NR==7' snaphu.conf > Snaphu_command.txt
	sed 's/^.//' Snaphu_command.txt >> Snaphu_command.txt
	echo 'Initializing Snaphu for '$sub_dir $'\n' $(awk 'NR==2' Snaphu_command.txt) 
	source Snaphu_command.txt
	rm Snaphu_command.txt
	cd ..	
done 

echo 'DONE' 

